server {
  listen 80;
  server_name _;

  root /usr/share/nginx/html;
  index index.html;

  # SPA routing: fall back to index.html for client-side routes
  location / {
    try_files $uri $uri/ /index.html;
  }

  # Long cache for hashed assets
  location ~* \.(?:js|mjs|css|png|jpg|jpeg|gif|svg|ico|webp|wasm|woff2?|ttf|otf)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
    access_log off;
    try_files $uri =404;
  }

  # Helpful MIME types for common 3D assets
  types {
    model/gltf+json  gltf;
    model/gltf-binary glb;
    image/ktx2       ktx2;
    application/octet-stream hdr;
    application/octet-stream bin;
    application/octet-stream basis;
    application/octet-stream obj;
    application/octet-stream mtl;
  }
}
